"use strict";angular.module("sbAdminApp").factory("secureService",function($http,$location,$rootScope){var login=function(user){var url="http://54.213.179.207/homerapi/admin/login?";return $http.get(url+"email="+user.email+"&pass="+user.pass).then(function(data){return"false"==data.data.success?void alert("invalid email or password"):(localStorage.setItem("Token",data.data.token),$rootScope.token=data.data.token,void $location.path("/dashboard/users"))},function(data){$("#error_msg").html(data.data.error),$rootScope.animatErrMsg("#error_msg")})},users=function(page,search){var header={headers:{Authorization:localStorage.getItem("Token")}};return $http.get("http://54.213.179.207/homerapi/admin/users?page="+page+"&search="+search,header).then(function(data){return void 0==data.data.users&&location.replace("/#/login"),data.data})},searchUsers=function(query){var header={headers:{Authorization:localStorage.getItem("Token")}};return $http.get("http://54.213.179.207/homerapi/admin/users?search="+query,header).then(function(data){return void 0==data.data.users&&location.replace("/#/login"),data.data.users})},getUser=function(userid){var header={headers:{Authorization:localStorage.getItem("Token")}};return $http.get("http://54.213.179.207/homerapi/admin/users/"+userid,header).then(function(data){return void 0==data.data.user&&location.replace("/#/login"),data.data.user})},getPost=function(postid){var header={headers:{Authorization:localStorage.getItem("Token")}};return $http.get("http://54.213.179.207/homerapi/admin/posts/"+postid,header).then(function(data){return data.data.post})},getAllPosts=function(page){var header={headers:{Authorization:localStorage.getItem("Token")}};return $http.get("http://54.213.179.207/homerapi/admin/posts?page="+page,header).then(function(data){return void 0==data.data.posts&&location.replace("/#/login"),data.data})},searchPost=function(q){var header={headers:{Authorization:localStorage.getItem("Token")}};return $http.get("http://54.213.179.207/homerapi/admin/posts?search="+q,header).then(function(data){return void 0==data.data.posts&&location.replace("/#/login"),data.data.posts})};return{login:login,users:users,getUser:getUser,getPost:getPost,getAllPosts:getAllPosts,searchUsers:searchUsers,searchPost:searchPost}});